$("<style>").text(`
canvas {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
pointer-events: none;
z-index: 9999;
}
`).appendTo("head");const canvas=$('<canvas id="fireworksCanvas"></canvas>').appendTo("body.desktop.home, body.mobile")[0];const ctx=canvas.getContext("2d");canvas.width=window.innerWidth;canvas.height=window.innerHeight;class Firework{constructor(x,y){this.x=x;this.y=y;this.startY=canvas.height;this.targetY=Math.random()*canvas.height/2;this.speed=Math.random()*2+2;this.particles=[];this.exploded=false}update(){if(this.y>this.targetY&&!this.exploded){this.y-=this.speed}else if(!this.exploded){this.explode();this.exploded=true}}draw(){if(!this.exploded){ctx.beginPath();ctx.arc(this.x,this.y,1,0,Math.PI*2);ctx.fillStyle="#FF4500";ctx.fill()}this.particles.forEach(particle=>{particle.update();particle.draw()})}explode(){const primaryColor="#FFD700";const secondaryColor="#FF6347";for(let i=0;i<100;i++){const color=i%2===0?primaryColor:secondaryColor;const speed=Math.random()*4+3;const angle=Math.random()*Math.PI*2;this.particles.push(new Particle(this.x,this.y,color,speed,angle))}}}class Particle{constructor(x,y,color,speed,angle){this.x=x;this.y=y;this.color=color;this.speed=speed;this.angle=angle;this.size=Math.random()*1.5+.5;this.alpha=1;this.trailLength=Math.random()*10+5}update(){this.x+=this.speed*Math.cos(this.angle);this.y+=this.speed*Math.sin(this.angle);this.alpha-=.015;this.size*=.98}draw(){ctx.save();ctx.globalAlpha=this.alpha;ctx.strokeStyle=this.color;ctx.lineWidth=this.size;ctx.beginPath();ctx.moveTo(this.x,this.y);ctx.lineTo(this.x-this.speed*Math.cos(this.angle)*this.trailLength,this.y-this.speed*Math.sin(this.angle)*this.trailLength);ctx.stroke();ctx.restore()}}const fireworks=[];let intervalId;let animationFrameId;function createFirework(){const fireworkCount=Math.floor(Math.random()*2)+2;for(let i=0;i<fireworkCount;i++){const x=Math.random()*canvas.width;fireworks.push(new Firework(x,canvas.height))}}function animate(){ctx.clearRect(0,0,canvas.width,canvas.height);fireworks.forEach((firework,index)=>{firework.update();firework.draw();if(firework.exploded&&firework.particles.every(p=>p.alpha<=0)){fireworks.splice(index,1)}});animationFrameId=requestAnimationFrame(animate)}function stopFireworks(){clearInterval(intervalId);cancelAnimationFrame(animationFrameId)}function startFireworks(){intervalId=setInterval(createFirework,2e3);animate()}document.addEventListener("visibilitychange",()=>{if(document.hidden){stopFireworks()}else{startFireworks()}});$(window).on("resize",()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight});startFireworks();
